{% extends 'template.html' %}
{% block conteudo %}
  <form method="post" action="{{ url_for('criarSolicitacao') }}" enctype="multipart/form-data" id="formulario">
    <div class="box_cabecalho">
      <div class="box_titulo_interno">
        <i class="bi bi-bricks" data-toggle="tooltip" data-placement="right"></i> {{ titulo }}
      </div>
      <div class="box_botoes">
        <a class="btn btn_titulo" href="#" onclick="myFunction()"><i class="bi bi-save" style="font-size:1.5rem; color:white;"></i></a>
      </div>
      <div class="box_botoes">
        <a class="btn btn_titulo" href="{{ url_for('solicitacao') }}"><i class="bi bi-reply" style="font-size:1.5rem; color:white;"></i></a>
      </div>
    </div>
    <!-- conteudo -->
    <div class="boxformulario">
      <fieldset>
        {{ form.csrf_token() }}
        <div class="form-group">{{ form.descricao.label(class='form-label') }}
          {{ form.descricao(class='form-control') }}
        </div>
        <div class="form-group">{{ form.tiposolicitacao.label(class='form-label') }}
          {{ form.tiposolicitacao(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.tiposervico.label(class='form-label') }}
          {{ form.tiposervico(class='form-control') }}
        </div>      
        <div class="form-group">{{ form.cep.label(class='form-label') }}
          {{ form.cep(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.rua.label(class='form-label') }}
          {{ form.rua(class='form-control') }}
        </div>     
        <div class="form-group">{{ form.numero.label(class='form-label') }}
          {{ form.numero(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.bairro.label(class='form-label') }}
          {{ form.bairro(class='form-control') }}
        </div>      
        <div class="form-group">{{ form.uf.label(class='form-label') }}
          {{ form.uf(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.cidade.label(class='form-label') }}
          {{ form.cidade(class='form-control') }}
        </div>
      </div>  
      <div class="boxformulario">      
        <div class="form-group">{{ form.nome.label(class='form-label') }}
          {{ form.nome(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.sexo.label(class='form-label') }}
          {{ form.sexo(class='form-control') }}
        </div>
        <div class="form-group">{{ form.cepsolicitante.label(class='form-label') }}
          {{ form.cepsolicitante(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.ruasolicitante.label(class='form-label') }}
          {{ form.ruasolicitante(class='form-control') }}
        </div>     
        <div class="form-group">{{ form.numerosolicitante.label(class='form-label') }}
          {{ form.numerosolicitante(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.bairrosolicitante.label(class='form-label') }}
          {{ form.bairrosolicitante(class='form-control') }}
        </div>      
        <div class="form-group">{{ form.ufsolicitante.label(class='form-label') }}
          {{ form.ufsolicitante(class='form-control') }}
        </div>        
        <div class="form-group">{{ form.cidadesolicitante.label(class='form-label') }}
          {{ form.cidadesolicitante(class='form-control') }}
        </div>                         
        <div class="form-group">{{ form.status.label(class='form-label') }}
          {{ form.status(class='form-control') }}
        </div>
      </fieldset>
    </div>
  </form>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
      $(document).ready(function() {
          $('#cep').on('blur', function() {
              var cep = $(this).val().replace(/\D/g, '');
              var url = 'https://viacep.com.br/ws/' + cep + '/json/';
  
              $.getJSON(url, function(data) {
                  $('#rua').val(data.logradouro);
                  $('#cidade').val(data.localidade);
                  $('#bairro').val(data.bairro);
                  $('#uf').val(data.uf);
              });
          });
      });

      $(document).ready(function() {
        $('#cepsolicitante').on('blur', function() {
            var cep = $(this).val().replace(/\D/g, '');
            var url = 'https://viacep.com.br/ws/' + cep + '/json/';

            $.getJSON(url, function(data) {
                $('#ruasolicitante').val(data.logradouro);
                $('#cidadesolicitante').val(data.localidade);
                $('#bairrosolicitante').val(data.bairro);
                $('#ufsolicitante').val(data.uf);
            });
        });
    });      
  </script> 
{% endblock %}

